{
	"info": {
		"_postman_id": "quiz-app-automated-2024",
		"name": "QuizApp_Automated_Runner",
		"description": "Automated test collection with built-in assertions for automated execution",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8000",
			"type": "string"
		},
		{
			"key": "quiz_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "user_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "session_code",
			"value": "",
			"type": "string"
		},
		{
			"key": "creator_id",
			"value": "automated_test_user",
			"type": "string"
		}
	],
	"item": [
		{
			"name": "1. Health Check",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Response has success message\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.success).to.eql(true);",
							"    pm.expect(jsonData.message).to.include('running');",
							"});"
						]
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/",
					"host": ["{{base_url}}"],
					"path": [""]
				}
			}
		},
		{
			"name": "2. Create Quiz",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Quiz created with ID\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData).to.have.property('id');",
							"    pm.collectionVariables.set(\"quiz_id\", jsonData.id);",
							"});",
							"",
							"pm.test(\"Success message received\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.message).to.include('success');",
							"});"
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [{"key": "Content-Type", "value": "application/json"}],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"title\": \"Automated Test Quiz - Python\",\n  \"description\": \"Created by automated test runner\",\n  \"language\": \"English\",\n  \"category\": \"Science and Technology\",\n  \"creatorId\": \"{{creator_id}}\",\n  \"questions\": [\n    {\n      \"id\": \"1\",\n      \"questionText\": \"What is Python?\",\n      \"type\": \"single\",\n      \"options\": [\"Programming Language\", \"Snake\"],\n      \"correctAnswerIndex\": 0\n    }\n  ]\n}"
				},
				"url": {
					"raw": "{{base_url}}/quizzes",
					"host": ["{{base_url}}"],
					"path": ["quizzes"]
				}
			}
		},
		{
			"name": "3. Get Quiz by ID",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Quiz has correct structure\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData).to.have.property('title');",
							"    pm.expect(jsonData).to.have.property('questions');",
							"    pm.expect(jsonData.questions).to.be.an('array');",
							"});"
						]
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/quizzes/{{quiz_id}}?user_id={{creator_id}}",
					"host": ["{{base_url}}"],
					"path": ["quizzes", "{{quiz_id}}"],
					"query": [{"key": "user_id", "value": "{{creator_id}}"}]
				}
			}
		},
		{
			"name": "4. Update Quiz",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Update successful\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.success).to.eql(true);",
							"    pm.expect(jsonData.message).to.include('updated');",
							"});"
						]
					}
				}
			],
			"request": {
				"method": "PATCH",
				"header": [{"key": "Content-Type", "value": "application/json"}],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"description\": \"Updated by automated test\"\n}"
				},
				"url": {
					"raw": "{{base_url}}/quizzes/{{quiz_id}}",
					"host": ["{{base_url}}"],
					"path": ["quizzes", "{{quiz_id}}"]
				}
			}
		},
		{
			"name": "5. Search Quizzes",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Search returns results\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData).to.have.property('results');",
							"    pm.expect(jsonData.results).to.be.an('array');",
							"});"
						]
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/quizzes/search?q=automated",
					"host": ["{{base_url}}"],
					"path": ["quizzes", "search"],
					"query": [{"key": "q", "value": "automated"}]
				}
			}
		},
		{
			"name": "6. Create User",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"User created successfully\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.success).to.eql(true);",
							"    pm.expect(jsonData).to.have.property('user_id');",
							"    pm.collectionVariables.set(\"user_id\", jsonData.user_id);",
							"});"
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [{"key": "Content-Type", "value": "application/json"}],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"username\": \"automated_user\",\n  \"email\": \"auto@test.com\",\n  \"full_name\": \"Automated Test User\"\n}"
				},
				"url": {
					"raw": "{{base_url}}/users",
					"host": ["{{base_url}}"],
					"path": ["users"]
				}
			}
		},
		{
			"name": "7. Get User",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"User profile retrieved\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.user).to.have.property('username');",
							"    pm.expect(jsonData.user.username).to.eql('automated_user');",
							"});"
						]
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/users/{{user_id}}",
					"host": ["{{base_url}}"],
					"path": ["users", "{{user_id}}"]
				}
			}
		},
		{
			"name": "8. Add Review",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Review added successfully\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.success).to.eql(true);",
							"    pm.expect(jsonData).to.have.property('review_id');",
							"});"
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [{"key": "Content-Type", "value": "application/json"}],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"user_id\": \"{{user_id}}\",\n  \"username\": \"Automated Tester\",\n  \"rating\": 5,\n  \"comment\": \"Automated test review\"\n}"
				},
				"url": {
					"raw": "{{base_url}}/quizzes/{{quiz_id}}/reviews",
					"host": ["{{base_url}}"],
					"path": ["quizzes", "{{quiz_id}}", "reviews"]
				}
			}
		},
		{
			"name": "9. Get Reviews",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Reviews retrieved with rating\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData).to.have.property('average_rating');",
							"    pm.expect(jsonData.reviews).to.be.an('array');",
							"});"
						]
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/quizzes/{{quiz_id}}/reviews",
					"host": ["{{base_url}}"],
					"path": ["quizzes", "{{quiz_id}}", "reviews"]
				}
			}
		},
		{
			"name": "10. Record Attempt",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Attempt recorded with score\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.success).to.eql(true);",
							"    pm.expect(jsonData).to.have.property('percentage');",
							"    pm.expect(jsonData.percentage).to.eql(100);",
							"});"
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [{"key": "Content-Type", "value": "application/json"}],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"user_id\": \"{{user_id}}\",\n  \"score\": 1,\n  \"total_questions\": 1,\n  \"time_taken\": 30,\n  \"answers\": [{\"question_id\": \"1\", \"answer\": 0}]\n}"
				},
				"url": {
					"raw": "{{base_url}}/quizzes/{{quiz_id}}/attempt",
					"host": ["{{base_url}}"],
					"path": ["quizzes", "{{quiz_id}}", "attempt"]
				}
			}
		},
		{
			"name": "11. Submit Result",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Result submitted successfully\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.success).to.eql(true);",
							"    pm.expect(jsonData.score).to.eql(1);",
							"});"
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [{"key": "Content-Type", "value": "application/json"}],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"quiz_id\": \"{{quiz_id}}\",\n  \"user_id\": \"{{user_id}}\",\n  \"username\": \"Auto Tester\",\n  \"score\": 1,\n  \"total_questions\": 1,\n  \"percentage\": 100,\n  \"time_taken\": 30\n}"
				},
				"url": {
					"raw": "{{base_url}}/results",
					"host": ["{{base_url}}"],
					"path": ["results"]
				}
			}
		},
		{
			"name": "12. Get Leaderboard",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Leaderboard has entries\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.success).to.eql(true);",
							"    pm.expect(jsonData.leaderboard).to.be.an('array');",
							"});"
						]
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/leaderboard/{{quiz_id}}",
					"host": ["{{base_url}}"],
					"path": ["leaderboard", "{{quiz_id}}"]
				}
			}
		},
		{
			"name": "13. Get Categories",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Categories list retrieved\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.success).to.eql(true);",
							"    pm.expect(jsonData.categories).to.be.an('array');",
							"});"
						]
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/categories",
					"host": ["{{base_url}}"],
					"path": ["categories"]
				}
			}
		},
		{
			"name": "14. Get Dashboard Stats",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Dashboard stats retrieved\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.success).to.eql(true);",
							"    pm.expect(jsonData.stats).to.have.property('total_quizzes');",
							"});"
						]
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/dashboard/stats",
					"host": ["{{base_url}}"],
					"path": ["dashboard", "stats"]
				}
			}
		},
		{
			"name": "15. ERROR - Get Invalid Quiz",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Error handled correctly\", function () {",
							"    pm.expect(pm.response.code).to.be.oneOf([404, 500]);",
							"});",
							"",
							"pm.test(\"Error message present\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData).to.have.property('detail');",
							"});"
						]
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/quizzes/000000000000000000000000?user_id={{creator_id}}",
					"host": ["{{base_url}}"],
					"path": ["quizzes", "000000000000000000000000"],
					"query": [{"key": "user_id", "value": "{{creator_id}}"}]
				}
			}
		},
		{
			"name": "16. ERROR - Empty Title Quiz",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Validation error returned\", function () {",
							"    pm.response.to.have.status(400);",
							"});",
							"",
							"pm.test(\"Error detail mentions title\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.detail.toLowerCase()).to.include('title');",
							"});"
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [{"key": "Content-Type", "value": "application/json"}],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"title\": \"\",\n  \"description\": \"Test\",\n  \"language\": \"English\",\n  \"category\": \"Test\",\n  \"creatorId\": \"test\",\n  \"questions\": [{\"id\": \"1\", \"questionText\": \"Q?\", \"type\": \"single\", \"options\": [\"A\"], \"correctAnswerIndex\": 0}]\n}"
				},
				"url": {
					"raw": "{{base_url}}/quizzes",
					"host": ["{{base_url}}"],
					"path": ["quizzes"]
				}
			}
		},
		{
			"name": "17. ERROR - Invalid Session",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Session not found error\", function () {",
							"    pm.response.to.have.status(404);",
							"});",
							"",
							"pm.test(\"Error message about session\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.detail.toLowerCase()).to.include('session');",
							"});"
						]
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/api/session/INVALID999",
					"host": ["{{base_url}}"],
					"path": ["api", "session", "INVALID999"]
				}
			}
		},
		{
			"name": "18. CLEANUP - Delete Quiz",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Quiz deleted successfully\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Delete confirmation received\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.success).to.eql(true);",
							"});"
						]
					}
				}
			],
			"request": {
				"method": "DELETE",
				"header": [],
				"url": {
					"raw": "{{base_url}}/quizzes/{{quiz_id}}",
					"host": ["{{base_url}}"],
					"path": ["quizzes", "{{quiz_id}}"]
				}
			}
		}
	]
}
